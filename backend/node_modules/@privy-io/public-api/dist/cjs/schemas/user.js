"use strict";var e=require("zod"),t=require("./core.js"),r=require("./smart-wallet-config.js"),i=require("./wallet-api/wallets/index.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("../constants/smart-wallets.js"),require("@privy-io/api-base"),require("./api.js"),require("./transaction.js"),require("./wallet-api/export.js"),require("./wallet-api/wallets/spark/index.js"),require("./wallet-api/wallets/spark/utils.js");const l=e.z.object({type:e.z.literal("email"),address:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),n=e.z.object({type:e.z.literal("phone"),number:e.z.string().optional(),phoneNumber:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),a=e.z.object({type:e.z.enum(["wallet","smart_wallet"]),address:e.z.string(),chain_type:e.z.enum(["solana","ethereum"])}),s=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_id:e.z.string().optional(),chain_type:e.z.literal("ethereum"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),o=e.z.object({type:e.z.literal("smart_wallet"),address:e.z.string(),smart_wallet_type:r.SmartWalletProvider,smart_wallet_version:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),u=e.z.object({type:e.z.literal("wallet"),address:e.z.string(),chain_type:e.z.literal("solana"),wallet_client:e.z.literal("unknown"),wallet_client_type:e.z.string().optional(),connector_type:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),z=e.z.object({type:e.z.literal("farcaster"),fid:e.z.number(),owner_address:t.WalletAddress,username:e.z.string().optional(),display_name:e.z.string().optional(),bio:e.z.string().optional(),profile_picture:e.z.string().optional(),profile_picture_url:e.z.string().optional(),homepage_url:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable(),signer_public_key:e.z.string().optional()}),_=e.z.object({type:e.z.literal("passkey"),created_with_browser:e.z.string().optional(),created_with_os:e.z.string().optional(),created_with_device:e.z.string().optional(),credential_id:e.z.string(),authenticator_name:e.z.string().optional(),public_key:e.z.string().optional(),enrolled_in_mfa:e.z.boolean(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),b=e.z.object({type:e.z.literal("telegram"),telegram_user_id:e.z.string(),first_name:e.z.string().nullish(),last_name:e.z.string().nullish(),username:e.z.string().nullish(),photo_url:e.z.string().nullish(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,firstName:e.first_name})));let c=e.z.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),p=e.z.object({id:e.z.string().nullable().default(null),type:e.z.literal("wallet"),address:e.z.string(),imported:e.z.boolean().default(!1),delegated:e.z.boolean().default(!1),wallet_index:e.z.number(),chain_id:e.z.string(),chain_type:e.z.string(),wallet_client:e.z.literal("privy"),wallet_client_type:e.z.literal("privy"),connector_type:e.z.literal("embedded"),recovery_method:c,verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()});const d=p.merge(e.z.object({chain_type:e.z.literal("ethereum")})),m=p.merge(e.z.object({chain_type:e.z.literal("solana"),public_key:e.z.string()})),g=p.merge(e.z.object({chain_type:e.z.literal("bitcoin-segwit"),public_key:e.z.string()})),f=p.merge(e.z.object({chain_type:e.z.literal("bitcoin-taproot"),public_key:e.z.string()})),v=p.merge(e.z.object({chain_type:i.CurveSigningChainTypes}));let y=e.z.object({id:e.z.string(),recovery_method:e.z.literal("privy-v2")});const h=e.z.union([d.merge(y),m.merge(y),g.merge(y),f.merge(y),v.merge(y)]),j=e.z.object({type:e.z.literal("google_oauth"),subject:e.z.string(),email:e.z.string(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),x=e.z.object({type:e.z.literal("twitter_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),profile_picture_url:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),k=e.z.object({type:e.z.literal("discord_oauth"),subject:e.z.string(),username:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),w=e.z.object({type:e.z.literal("github_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),A=e.z.object({type:e.z.literal("linkedin_oauth"),subject:e.z.string(),name:e.z.string().optional(),email:e.z.string().nullable(),vanity_name:e.z.string().optional(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),q=e.z.object({type:e.z.literal("spotify_oauth"),subject:e.z.string(),email:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),W=e.z.object({type:e.z.literal("instagram_oauth"),subject:e.z.string(),username:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),O=e.z.object({type:e.z.literal("tiktok_oauth"),subject:e.z.string(),username:e.z.string().nullable(),name:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),S=e.z.object({type:e.z.literal("line_oauth"),subject:e.z.string(),name:e.z.string().nullable(),email:e.z.string().nullable(),profile_picture_url:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),E=e.z.object({type:e.z.literal("apple_oauth"),subject:e.z.string(),email:e.z.string().nullable(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),M=e.z.object({type:e.z.literal("custom_auth"),custom_user_id:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),C=e.z.object({address:e.z.string()}),T=e.z.object({address:e.z.string()}),U=e.z.object({type:e.z.literal("cross_app"),subject:e.z.string(),provider_app_id:e.z.string(),embedded_wallets:e.z.array(C),smart_wallets:e.z.array(T),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),L=e.z.object({type:e.z.literal("authorization_key"),public_key:e.z.string(),verified_at:e.z.number(),first_verified_at:e.z.number().nullable(),latest_verified_at:e.z.number().nullable()}),I=e.z.union([l,n,s,u,o,d,m,g,f,v,j,x,k,w,q,W,O,S,A,E,M,z,_,b,U,L]),P=e.z.object({type:e.z.literal("sms"),verified_at:e.z.number()}),B=e.z.object({type:e.z.literal("totp"),verified_at:e.z.number()}),G=e.z.object({type:e.z.literal("passkey"),verified_at:e.z.number()}),N=e.z.union([P,B,G]),D=e.z.record(e.z.string(),e.z.union([e.z.string(),e.z.number(),e.z.boolean()])),F=e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),refresh_token_expires_in_seconds:e.z.number().optional(),scopes:e.z.array(e.z.string()).optional()}),J=e.z.object({id:e.z.string(),linked_accounts:e.z.array(I),mfa_methods:e.z.array(N),created_at:e.z.number(),has_accepted_terms:e.z.boolean(),is_guest:e.z.boolean(),custom_metadata:D.optional()}),K=e.z.enum(["set","ignore","clear"]),V=e.z.object({user:J,identity_token:e.z.string().min(1).nullable()}),H=e.z.object({user:J,token:e.z.string().min(1).nullable(),privy_access_token:e.z.string().min(1).nullable(),refresh_token:e.z.string().min(1).nullable(),identity_token:e.z.string().min(1).optional(),is_new_user:e.z.boolean().optional(),oauth_tokens:F.optional(),oauth_provider_tokens:e.z.object({provider:e.z.string(),access_token:e.z.string(),access_token_expires_in_seconds:e.z.number().optional(),refresh_token:e.z.string().optional(),scopes:e.z.array(e.z.string()).optional()}).optional(),session_update_action:K}),Q=e.z.object({user:e.z.null(),token:e.z.null(),refresh_token:e.z.null(),session_update_action:e.z.literal(K.Values.clear)}),R=e.z.union([H,Q]);exports.AppleOauthAccount=E,exports.AuthenticatedUser=H,exports.AuthorizationKeyAccount=L,exports.BaseWalletAccount=a,exports.BitcoinSegwitEmbeddedWalletAccount=g,exports.BitcoinTaprootEmbeddedWalletAccount=f,exports.CrossAppAccount=U,exports.CrossAppEmbeddedWallet=C,exports.CrossAppSmartWallet=T,exports.CurveSigningEmbeddedWalletAccount=v,exports.CustomJwtAccount=M,exports.CustomMetadata=D,exports.DiscordOauthAccount=k,exports.EmailAccount=l,exports.EthereumAccount=s,exports.EthereumEmbeddedWalletAccount=d,exports.FarcasterAccount=z,exports.GithubOauthAccount=w,exports.GoogleOauthAccount=j,exports.InstagramOauthAccount=W,exports.LineOauthAccount=S,exports.LinkedAccount=I,exports.LinkedInOauthAccount=A,exports.LinkedMfaMethod=N,exports.LoggedOutUser=Q,exports.MaybeUser=R,exports.OAuthTokens=F,exports.PasskeyAccount=_,exports.PasskeyMfaMethod=G,exports.PhoneAccount=n,exports.SessionUpdateActionEnum=K,exports.SmartWalletAccount=o,exports.SmsMfaMethod=P,exports.SolanaAccount=u,exports.SolanaEmbeddedWalletAccount=m,exports.SpotifyOauthAccount=q,exports.TelegramAccount=b,exports.TiktokOauthAccount=O,exports.TotpMfaMethod=B,exports.TwitterOauthAccount=x,exports.UnifiedWalletAccount=h,exports.User=J,exports.UserWithIdentityToken=V;
